  
<!doctype html>
<html>
<head>
  <title>TEST6</title>
</head>

<body>
	
<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
<script>
  AFRAME.registerComponent("foo", {
    init: function() {
      var self = this.el
      var fadeInAnim = document.querySelector("#fadein-animation")
      var fadeOutAnim = document.querySelector("#fadeout-animation")
			var images = ["Cafe 360.jpg","test.jpg"]
      var switchflip = 1
      fadeOutAnim.addEventListener("animationend", (e) => {
        self.setAttribute("material", "src", images[switchflip])
        switchflip = switchflip === 1 ? 0 : 1
        self.emit('fadein')
      })
      fadeInAnim.addEventListener("animationend", (e) => {
        self.emit('fadeout')
      })
      setTimeout(function() {
        self.emit('fadeout')
      }, 1000)
    }
  })

</script>
<a-scene>
  <a-sky material="opacity:1; src: Cafe 360.jpg" foo>
    <a-animation id="fadeout-animation" attribute="material.opacity" dur="1000" direction="forward" from="1" to="0" begin="fadeout"></a-animation>
    <a-animation id="fadein-animation" attribute="material.opacity" dur="1000" direction="forward" from="0" to="1" begin="fadein"></a-animation>
  </a-sky>
</a-scene>
  
</body>
</html
